sudo: required
dist: trusty

before_install:
  - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
  - sudo apt-get update -qq
  
install:
    - sudo apt-get install g++-6 libboost-all-dev valgrind clang-3.8 gcovr
    - sudo pip install codecov

matrix:
    include:
        - env: COMPILER=g++-6
        - env: COMPILER=clang++-3.8

language: cpp
script:
    - touch ~/.bash_history
    - mkdir -p build && cd build
    - CXX=$COMPILER cmake -DCOVERAGE=ON .. && make tests-cov

after_success:
    - codecov
