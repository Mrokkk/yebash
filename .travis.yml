sudo: required
dist: trusty
addons:
    apt:
        sources:
            - ubuntu-toolchain-r-test
        packages:
            - g++-6
            - libboost-all-dev
            - valgrind
            - clang-3.8

cache:
    - ccache
    - packages

matrix:
    include:
        - env: COMPILER=g++-6
        - env: COMPILER=clang++-3.8

language: cpp
script:
    - touch ~/.bash_history
    - mkdir -p build && cd build
    - CXX=$COMPILER cmake -DCOVERAGE=1 .. && make
    - make tests-cov

after_success:
    - bash <(curl -s https://codecov.io/bash)
